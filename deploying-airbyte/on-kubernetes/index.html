<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-deploying-airbyte/on-kubernetes">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<title data-rh="true">On Kubernetes \(Beta\) | Airbyte Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://airbytehq.github.io/deploying-airbyte/on-kubernetes"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="On Kubernetes \(Beta\) | Airbyte Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://airbytehq.github.io/deploying-airbyte/on-kubernetes"><link data-rh="true" rel="alternate" href="https://airbytehq.github.io/deploying-airbyte/on-kubernetes" hreflang="en"><link data-rh="true" rel="alternate" href="https://airbytehq.github.io/deploying-airbyte/on-kubernetes" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d30a4f2e.css">
<link rel="preload" href="/assets/js/runtime~main.a2b21224.js" as="script">
<link rel="preload" href="/assets/js/main.4b437c0c.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-dark.png" alt="Simple, secure and extensible data integration" class="themedImage_W2Cr themedImage--light_TfLj" height="40" width="140"><img src="/img/logo-light.png" alt="Simple, secure and extensible data integration" class="themedImage_W2Cr themedImage--dark_oUvU" height="40" width="140"></div><b class="navbar__title"></b></a><a href="https://airbyte.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://status.airbyte.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://airbyte.io/recipes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Recipes<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discuss.airbyte.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud/getting-started-with-airbyte-cloud">Airbyte Cloud QuickStart</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/quickstart/deploy-airbyte">Airbyte Open Source QuickStart</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/deploying-airbyte/local-deployment">Deploying Airbyte Open Source</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/deploying-airbyte/local-deployment">Local Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/deploying-airbyte/on-aws-ec2">On AWS \(EC2\)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/deploying-airbyte/on-aws-ecs">On AWS ECS \(Coming Soon\)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/deploying-airbyte/on-azure-vm-cloud-shell">On Azure\(VM\)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/deploying-airbyte/on-gcp-compute-engine">On GCP \(Compute Engine\)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/deploying-airbyte/on-kubernetes">On Kubernetes \(Beta\)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/deploying-airbyte/on-plural">On Plural (Beta)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/deploying-airbyte/on-oci-vm">On Oracle Cloud Infrastructure VM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/deploying-airbyte/on-digitalocean-droplet">On DigitalOcean \(Droplet\)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/operator-guides/upgrading-airbyte">Operator Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/integrations/">Connector Catalog</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/connector-development/">Connector Development</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/contributing-to-airbyte/">Contributing to Airbyte</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/understanding-airbyte/">Understanding Airbyte</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/api-documentation">API documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/project-overview/">Project Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/troubleshooting/">Troubleshooting &amp; FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/airbytehq/airbyte" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_tcZa">Airbyte Repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Deploying Airbyte Open Source</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">On Kubernetes \(Beta\)</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>On Kubernetes <!-- -->(<!-- -->Beta<!-- -->)</h1><h2 class="anchor anchorWithStickyNavbar_mojV" id="overview">Overview<a class="hash-link" href="#overview" title="Direct link to heading">‚Äã</a></h2><p>Airbyte allows scaling sync workloads horizontally using Kubernetes. The core components <!-- -->(<!-- -->api server, scheduler, etc<!-- -->)<!-- --> run as deployments while the scheduler launches connector-related pods on different nodes.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="quickstart">Quickstart<a class="hash-link" href="#quickstart" title="Direct link to heading">‚Äã</a></h2><p>If you don&#x27;t want to configure your own K8s cluster and Airbyte instance, you can use the free, open-source project <a href="https://www.plural.sh/" target="_blank" rel="noopener noreferrer">Plural</a> to bring up a K8s cluster and Airbyte for you. Use <a href="/deploying-airbyte/on-plural">this guide</a> to get started.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="getting-started">Getting Started<a class="hash-link" href="#getting-started" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="cluster-setup">Cluster Setup<a class="hash-link" href="#cluster-setup" title="Direct link to heading">‚Äã</a></h3><p>For local testing we recommend following one of the following setup guides:</p><ul><li><a href="https://docs.docker.com/desktop/kubernetes" target="_blank" rel="noopener noreferrer">Docker Desktop <!-- -->(<!-- -->Mac<!-- -->)</a></li><li><a href="https://minikube.sigs.k8s.io/docs/start" target="_blank" rel="noopener noreferrer">Minikube</a><ul><li>NOTE: Start Minikube with at least 4gb RAM with <code>minikube start --memory=4000</code></li></ul></li><li><a href="https://kind.sigs.k8s.io/docs/user/quick-start/" target="_blank" rel="noopener noreferrer">Kind</a></li></ul><p>For testing on GKE you can <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-zonal-cluster" target="_blank" rel="noopener noreferrer">create a cluster with the command line or the Cloud Console UI</a>.</p><p>For testing on EKS you can <a href="https://eksctl.io/introduction/" target="_blank" rel="noopener noreferrer">install eksctl</a> and run <code>eksctl create cluster</code> to create an EKS cluster/VPC/subnets/etc. This process should take 10-15 minutes.</p><p>For production, Airbyte should function on most clusters v1.19 and above. We have tested support on GKE and EKS. If you run into a problem starting Airbyte, please reach out on the <code>#troubleshooting</code> channel on our <a href="https://slack.airbyte.io/" target="_blank" rel="noopener noreferrer">Slack</a> or <a href="https://github.com/airbytehq/airbyte/issues/new?assignees=&amp;labels=type%2Fbug&amp;template=bug-report.md&amp;title=" target="_blank" rel="noopener noreferrer">create an issue on GitHub</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="install-kubectl">Install <code>kubectl</code><a class="hash-link" href="#install-kubectl" title="Direct link to heading">‚Äã</a></h3><p>If you do not already have the CLI tool <code>kubectl</code> installed, please follow <a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener noreferrer">these instructions to install</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="configure-kubectl">Configure <code>kubectl</code><a class="hash-link" href="#configure-kubectl" title="Direct link to heading">‚Äã</a></h3><p>Configure <code>kubectl</code> to connect to your cluster by using <code>kubectl use-context my-cluster-name</code>.</p><ul><li><p>For GKE</p><ul><li><p>Configure <code>gcloud</code> with <code>gcloud auth login</code>.</p></li><li><p>On the Google Cloud Console, the cluster page will have a <code>Connect</code> button, which will give a command to run locally that looks like</p><p><code>gcloud container clusters get-credentials CLUSTER_NAME --zone ZONE_NAME --project PROJECT_NAME</code>.</p></li><li><p>Use <code>kubectl config get-contexts</code> to show the contexts available.</p></li><li><p>Run <code>kubectl config use-context &lt;gke context&gt;</code> to access the cluster from <code>kubectl</code>.</p></li></ul></li><li><p>For EKS</p><ul><li><a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html" target="_blank" rel="noopener noreferrer">Configure your AWS CLI</a> to connect to your project.</li><li>Install <a href="https://eksctl.io/introduction/" target="_blank" rel="noopener noreferrer">eksctl</a></li><li>Run <code>eksctl utils write-kubeconfig --cluster=&lt;CLUSTER NAME&gt;</code> to make the context available to <code>kubectl</code></li><li>Use <code>kubectl config get-contexts</code> to show the contexts available.</li><li>Run <code>kubectl config use-context &lt;eks context&gt;</code> to access the cluster with <code>kubectl</code>.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="configure-logs">Configure Logs<a class="hash-link" href="#configure-logs" title="Direct link to heading">‚Äã</a></h3><h4 class="anchor anchorWithStickyNavbar_mojV" id="default-configuration">Default Configuration<a class="hash-link" href="#default-configuration" title="Direct link to heading">‚Äã</a></h4><p>Both <code>dev</code> and <code>stable</code> versions of Airbyte include a stand-alone <code>Minio</code> deployment. Airbyte publishes logs to this <code>Minio</code> deployment by default. This means Airbyte comes as a <strong>self-contained Kubernetes deployment - no other configuration is required</strong>.</p><p>So if you just want logs to be sent to the local <code>Minio</code> deployment, you do not need to change the values of any environment variables from what is currently on master.</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="custom-configuration">Custom Configuration<a class="hash-link" href="#custom-configuration" title="Direct link to heading">‚Äã</a></h4><p>Alternatively, if you want logs to be sent to a custom location, Airbyte currently supports logging to <code>Minio</code>, <code>S3</code> or <code>GCS</code>. The following instructions are for users wishing to log to their own <code>Minio</code> layer, <code>S3</code> bucket or <code>GCS</code> bucket.</p><p>The provided credentials require both read and write permissions. The logger attempts to create the log bucket if it does not exist.</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="configuring-custom-minio-log-location">Configuring Custom Minio Log Location<a class="hash-link" href="#configuring-custom-minio-log-location" title="Direct link to heading">‚Äã</a></h5><p>To write to a custom minio log location, replace the following variables in the <code>.env</code> file in the <code>kube/overlays/stable</code> directory:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">S3_LOG_BUCKET=&lt;your_minio_bucket_to_write_logs_in&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS_ACCESS_KEY_ID=&lt;your_minio_access_key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS_SECRET_ACCESS_KEY=&lt;your_minio_secret_key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S3_MINIO_ENDPOINT=&lt;endpoint_where_minio_is_deployed_at&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The <code>S3_PATH_STYLE_ACCESS</code> variable should remain <code>true</code>. The <code>S3_LOG_BUCKET_REGION</code> variable should remain empty.</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="configuring-custom-s3-log-location">Configuring Custom S3 Log Location<a class="hash-link" href="#configuring-custom-s3-log-location" title="Direct link to heading">‚Äã</a></h5><p>To write to a custom S3 log location, replace the following variables in the <code>.env</code> file in the <code>kube/overlays/stable</code> directory:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">S3_LOG_BUCKET=&lt;your_s3_bucket_to_write_logs_in&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S3_LOG_BUCKET_REGION=&lt;your_s3_bucket_region&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS_ACCESS_KEY_ID=&lt;your_aws_access_key_id&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AWS_SECRET_ACCESS_KEY=&lt;your_aws_secret_access_key&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set this to empty.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S3_MINIO_ENDPOINT=</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Set this to empty.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">S3_PATH_STYLE_ACCESS=</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>See <a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/create-bucket-overview.html" target="_blank" rel="noopener noreferrer">here</a> for instructions on creating an S3 bucket and <a href="https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys" target="_blank" rel="noopener noreferrer">here</a> for instructions on creating AWS credentials.</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="configuring-custom-gcs-log-location">Configuring Custom GCS Log Location<a class="hash-link" href="#configuring-custom-gcs-log-location" title="Direct link to heading">‚Äã</a></h5><p>Create the GCP service account with read/write permission to the GCS log bucket.</p><p>1<!-- -->)<!-- --> Base64 encode the GCP json secret.</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"># The output of this command will be a Base64 string.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">$ cat gcp.json | base64</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>2<!-- -->)<!-- --> Populate the gcs-log-creds secrets with the Base64-encoded credential. This is as simple as taking the encoded credential from the previous step and adding it to the <code>secret-gcs-log-creds,yaml</code> file.</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">apiVersion: v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kind: Secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">metadata:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: gcs-log-creds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  namespace: default</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  gcp.json: &lt;base64-encoded-string&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>3<!-- -->)<!-- --> Replace the following variables in the <code>.env</code> file in the <code>kube/overlays/stable</code> directory:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">GCS_LOG_BUCKET=&lt;your_GCS_bucket_to_write_logs_in&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>4<!-- -->)<!-- --> Modify the <code>.secrets</code> file in the <code>kube/overlays/stable</code> directory</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain"># The path the GCS creds are written to. Unless you know what you are doing, use the below default value.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GOOGLE_APPLICATION_CREDENTIALS=/secrets/gcs-log-creds/gcp.json</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>See <a href="https://cloud.google.com/storage/docs/creating-buckets" target="_blank" rel="noopener noreferrer">here</a> for instruction on creating a GCS bucket and <a href="https://cloud.google.com/iam/docs/creating-managing-service-account-keys#iam-service-account-keys-create-console" target="_blank" rel="noopener noreferrer">here</a> for instruction on creating GCP credentials.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="launch-airbyte">Launch Airbyte<a class="hash-link" href="#launch-airbyte" title="Direct link to heading">‚Äã</a></h3><p>Run the following commands to launch Airbyte:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">git clone https://github.com/airbytehq/airbyte.git</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">cd airbyte</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply -k kube/overlays/stable</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>After 2-5 minutes, <code>kubectl get pods | grep airbyte</code> should show <code>Running</code> as the status for all the core Airbyte pods. This may take longer on Kubernetes clusters with slow internet connections.</p><p>Run <code>kubectl port-forward svc/airbyte-webapp-svc 8000:80</code> to allow access to the UI/API.</p><p>Now visit <a href="http://localhost:8000" target="_blank" rel="noopener noreferrer">http://localhost:8000</a> in your browser and start moving some data!</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="production-airbyte-on-kubernetes">Production Airbyte on Kubernetes<a class="hash-link" href="#production-airbyte-on-kubernetes" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="setting-resource-limits">Setting resource limits<a class="hash-link" href="#setting-resource-limits" title="Direct link to heading">‚Äã</a></h3><ul><li>Core container pods<ul><li>Instead of launching Airbyte with <code>kubectl apply -k kube/overlays/stable</code>, you can run with <code>kubectl apply -k kube/overlays/stable-with-resource-limits</code>.</li><li>The <code>kube/overlays/stable-with-resource-limits/set-resource-limits.yaml</code> file can be modified to provide different resource requirements for core pods.</li></ul></li><li>Connector pods<ul><li>By default, connector pods launch without resource limits.</li><li>To add resource limits, configure the &quot;Docker Resource Limits&quot; section of the <code>.env</code> file in the overlay folder you&#x27;re using.</li></ul></li><li>Volume sizes<ul><li>You can modify <code>kube/resources/volume-*</code> files to specify different volume sizes for the persistent volumes backing Airbyte.</li></ul></li></ul><h3 class="anchor anchorWithStickyNavbar_mojV" id="increasing-job-parallelism">Increasing job parallelism<a class="hash-link" href="#increasing-job-parallelism" title="Direct link to heading">‚Äã</a></h3><p>The number of simultaneous jobs <!-- -->(<!-- -->getting specs, checking connections, discovering schemas, and performing syncs<!-- -->)<!-- --> is limited by a few factors. First of all, the <code>SUBMITTER_NUM_THREADS</code> <!-- -->(<!-- -->set in the <code>.env</code> file for your Kustimization overlay<!-- -->)<!-- --> provides a global limit on the number of simultaneous jobs that can run across all worker pods.</p><p>The number of worker pods can be changed by increasing the number of replicas for the <code>airbyte-worker</code> deployment. An example of a Kustomization patch that increases this number can be seen in <code>airbyte/kube/overlays/dev-integration-test/kustomization.yaml</code> and <code>airbyte/kube/overlays/dev-integration-test/parallelize-worker.yaml</code>. The number of simultaneous jobs on a specific worker pod is also limited by the number of ports exposed by the worker deployment and set by <code>TEMPORAL_WORKER_PORTS</code> in your <code>.env</code> file. Without additional ports used to communicate to connector pods, jobs will start to run but will hang until ports become available.</p><p>You can also tune environment variables for the max simultaneous job types that can run on the worker pod by setting <code>MAX_SPEC_WORKERS</code>, <code>MAX_CHECK_WORKERS</code>, <code>MAX_DISCOVER_WORKERS</code>, <code>MAX_SYNC_WORKERS</code> for the worker pod deployment <!-- -->(<!-- -->not in the <code>.env</code> file<!-- -->)<!-- -->. These values can be used if you want to create separate worker deployments for separate types of workers with different resource allocations.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="cloud-logging">Cloud logging<a class="hash-link" href="#cloud-logging" title="Direct link to heading">‚Äã</a></h3><p>Airbyte writes logs to two directories. App logs, including server and scheduler logs, are written to the <code>app-logging</code> directory. Job logs are written to the <code>job-logging</code> directory. Both directories live at the top-level e.g., the <code>app-logging</code> directory lives at <code>s3://log-bucket/app-logging</code> etc. These paths can change, so we recommend having a dedicated log bucket, and to not use this bucket for other purposes.</p><p>Airbyte publishes logs every minute. This means it is normal to see minute-long log delays. Each publish creates it&#x27;s own log file, since Cloud Storages do not support append operations. This also mean it is normal to see hundreds of files in your log bucket.</p><p>Each log file is named <code>{yyyyMMddHH24mmss}_{podname}_{UUID}</code> and is not compressed. Users can view logs simply by navigating to the relevant folder and downloading the file for the time period in question.</p><p>See the <a href="/deploying-airbyte/on-kubernetes#known-issues">Known Issues</a> section for planned logging improvements.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="using-an-external-db">Using an external DB<a class="hash-link" href="#using-an-external-db" title="Direct link to heading">‚Äã</a></h3><p>After <a href="https://github.com/airbytehq/airbyte/issues/3605" target="_blank" rel="noopener noreferrer">Issue <!-- -->#<!-- -->3605</a> is completed, users will be able to configure custom dbs instead of a simple <code>postgres</code> container running directly in Kubernetes. This separate instance <!-- -->(<!-- -->preferable on a system like AWS RDS or Google Cloud SQL<!-- -->)<!-- --> should be easier and safer to maintain than Postgres on your cluster.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="known-issues">Known Issues<a class="hash-link" href="#known-issues" title="Direct link to heading">‚Äã</a></h2><p>As we improve our Kubernetes offering, we would like to point out some common pain points. We are working on improving these. Please let us know if there are any other issues blocking your adoption of Airbyte or if you would like to contribute fixes to address any of these issues.</p><ul><li>Some UI operations have higher latency on Kubernetes than Docker-Compose. <!-- -->(<a href="https://github.com/airbytehq/airbyte/issues/4233" target="_blank" rel="noopener noreferrer">#<!-- -->4233</a>)</li><li>Logging to Azure Storage is not supported. <!-- -->(<a href="https://github.com/airbytehq/airbyte/issues/4200" target="_blank" rel="noopener noreferrer">#<!-- -->4200</a>)</li><li>Large log files might take a while to load. <!-- -->(<a href="https://github.com/airbytehq/airbyte/issues/4201" target="_blank" rel="noopener noreferrer">#<!-- -->4201</a>)</li><li>UI does not include configured buckets in the displayed log path. <!-- -->(<a href="https://github.com/airbytehq/airbyte/issues/4204" target="_blank" rel="noopener noreferrer">#<!-- -->4204</a>)</li><li>Logs are not reset when Airbyte is re-deployed. <!-- -->(<a href="https://github.com/airbytehq/airbyte/issues/4235" target="_blank" rel="noopener noreferrer">#<!-- -->4235</a>)</li><li>File sources reading from and file destinations writing to local mounts are not supported on Kubernetes.</li></ul><h2 class="anchor anchorWithStickyNavbar_mojV" id="customizing-airbyte-manifests">Customizing Airbyte Manifests<a class="hash-link" href="#customizing-airbyte-manifests" title="Direct link to heading">‚Äã</a></h2><p>We use <a href="https://kustomize.io/" target="_blank" rel="noopener noreferrer">Kustomize</a> to allow overrides for different environments. Our shared resources are in the <code>kube/resources</code> directory, and we define overlays for each environment. We recommend creating your own overlay if you want to customize your deployments. This overlay can live in your own VCS.</p><p>Example <code>kustomization.yaml</code> file:</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kustomize.config.k8s.io/v1beta1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Kustomization</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">bases</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> https</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">//github.com/airbytehq/airbyte.git/kube/overlays/stable</span><span class="token punctuation" style="color:#393A34">?</span><span class="token plain">ref=master</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="view-raw-manifests">View Raw Manifests<a class="hash-link" href="#view-raw-manifests" title="Direct link to heading">‚Äã</a></h3><p>For a specific overlay, you can run <code>kubectl kustomize kube/overlays/stable</code> to view the manifests that Kustomize will apply to your Kubernetes cluster. This is useful for debugging because it will show the exact resources you are defining.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="helm-charts">Helm Charts<a class="hash-link" href="#helm-charts" title="Direct link to heading">‚Äã</a></h3><p>Check out the <a href="https://github.com/airbytehq/airbyte/tree/master/charts/airbyte" target="_blank" rel="noopener noreferrer">Helm Chart Readme</a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="operator-guide">Operator Guide<a class="hash-link" href="#operator-guide" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="view-api-server-logs">View API Server Logs<a class="hash-link" href="#view-api-server-logs" title="Direct link to heading">‚Äã</a></h3><p><code>kubectl logs deployments/airbyte-server</code> to view real-time logs. Logs can also be downloaded as a text file via the Admin tab in the UI.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="view-scheduler-or-job-logs">View Scheduler or Job Logs<a class="hash-link" href="#view-scheduler-or-job-logs" title="Direct link to heading">‚Äã</a></h3><p><code>kubectl logs deployments/airbyte-scheduler</code> to view real-time logs. Logs can also be downloaded as a text file via the Admin tab in the UI.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="connector-container-logs">Connector Container Logs<a class="hash-link" href="#connector-container-logs" title="Direct link to heading">‚Äã</a></h3><p>Although all logs can be accessed by viewing the scheduler logs, connector container logs may be easier to understand when isolated by accessing from the Airbyte UI or the <a href="/api-documentation">Airbyte API</a> for a specific job attempt. Connector pods launched by Airbyte will not relay logs directly to Kubernetes logging. You must access these logs through Airbyte.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="upgrading-airbyte-kube">Upgrading Airbyte Kube<a class="hash-link" href="#upgrading-airbyte-kube" title="Direct link to heading">‚Äã</a></h3><p>See <a href="/operator-guides/upgrading-airbyte">Upgrading K8s</a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="resizing-volumes">Resizing Volumes<a class="hash-link" href="#resizing-volumes" title="Direct link to heading">‚Äã</a></h3><p>To resize a volume, change the <code>.spec.resources.requests.storage</code> value. After re-applying, the mount should be extended if that operation is supported for your type of mount. For a production deployment, it&#x27;s useful to track the usage of volumes to ensure they don&#x27;t run out of space.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="copy-files-tofrom-volumes">Copy Files To/From Volumes<a class="hash-link" href="#copy-files-tofrom-volumes" title="Direct link to heading">‚Äã</a></h3><p>See the documentation for <a href="https://kubernetes.io/docs/reference/generated/kubectl/kubectl-commands#cp" target="_blank" rel="noopener noreferrer"><code>kubectl cp</code></a>.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="listing-files">Listing Files<a class="hash-link" href="#listing-files" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl </span><span class="token builtin class-name">exec</span><span class="token plain"> -it airbyte-scheduler-6b5747df5c-bj4fx </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> /tmp/workspace/8</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="reading-files">Reading Files<a class="hash-link" href="#reading-files" title="Direct link to heading">‚Äã</a></h3><div class="codeBlockContainer_I0IT language-bash theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-bash codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl </span><span class="token builtin class-name">exec</span><span class="token plain"> -it airbyte-scheduler-6b5747df5c-bj4fx </span><span class="token function" style="color:#d73a49">cat</span><span class="token plain"> /tmp/workspace/8/0/logs.log</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_mojV" id="persistent-storage-on-gke-regional-cluster">Persistent storage on GKE regional cluster<a class="hash-link" href="#persistent-storage-on-gke-regional-cluster" title="Direct link to heading">‚Äã</a></h3><p>Running Airbyte on GKE regional cluster requires enabling persistent regional storage. To do so, enable <a href="https://cloud.google.com/kubernetes-engine/docs/how-to/persistent-volumes/gce-pd-csi-driver" target="_blank" rel="noopener noreferrer">CSI driver</a> on GKE. After enabling, add <code>storageClassName: standard-rwo</code> to the <a href="https://github.com/airbytehq/airbyte/tree/86ee2ad05bccb4aca91df2fb07c412efde5ba71c/kube/resources/volume-configs.yaml" target="_blank" rel="noopener noreferrer">volume-configs</a> yaml.</p><p><code>volume-configs.yaml</code> example:</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> PersistentVolumeClaim</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> airbyte</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">volume</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">configs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">airbyte</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> volume</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">configs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">accessModes</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ReadWriteOnce</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">requests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">storage</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 500Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">storageClassName</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> standard</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">rwo</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="troubleshooting">Troubleshooting<a class="hash-link" href="#troubleshooting" title="Direct link to heading">‚Äã</a></h2><p>If you run into any problems operating Airbyte on Kubernetes, please reach out on the <code>#issues</code> channel on our <a href="https://slack.airbyte.io/" target="_blank" rel="noopener noreferrer">Slack</a> or <a href="https://github.com/airbytehq/airbyte/issues/new?assignees=&amp;labels=type%2Fbug&amp;template=bug-report.md&amp;title=" target="_blank" rel="noopener noreferrer">create an issue on GitHub</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="developing-airbyte-on-kubernetes">Developing Airbyte on Kubernetes<a class="hash-link" href="#developing-airbyte-on-kubernetes" title="Direct link to heading">‚Äã</a></h2><p><a href="https://docs.airbyte.io/contributing-to-airbyte/developing-on-kubernetes" target="_blank" rel="noopener noreferrer">Read about the Kubernetes dev cycle!</a></p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/airbytehq/airbyte/docs/../docs/deploying-airbyte/on-kubernetes.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/deploying-airbyte/on-gcp-compute-engine"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">On GCP \(Compute Engine\)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/deploying-airbyte/on-plural"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">On Plural (Beta)</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#quickstart" class="table-of-contents__link toc-highlight">Quickstart</a></li><li><a href="#getting-started" class="table-of-contents__link toc-highlight">Getting Started</a><ul><li><a href="#cluster-setup" class="table-of-contents__link toc-highlight">Cluster Setup</a></li><li><a href="#install-kubectl" class="table-of-contents__link toc-highlight">Install <code>kubectl</code></a></li><li><a href="#configure-kubectl" class="table-of-contents__link toc-highlight">Configure <code>kubectl</code></a></li><li><a href="#configure-logs" class="table-of-contents__link toc-highlight">Configure Logs</a></li><li><a href="#launch-airbyte" class="table-of-contents__link toc-highlight">Launch Airbyte</a></li></ul></li><li><a href="#production-airbyte-on-kubernetes" class="table-of-contents__link toc-highlight">Production Airbyte on Kubernetes</a><ul><li><a href="#setting-resource-limits" class="table-of-contents__link toc-highlight">Setting resource limits</a></li><li><a href="#increasing-job-parallelism" class="table-of-contents__link toc-highlight">Increasing job parallelism</a></li><li><a href="#cloud-logging" class="table-of-contents__link toc-highlight">Cloud logging</a></li><li><a href="#using-an-external-db" class="table-of-contents__link toc-highlight">Using an external DB</a></li></ul></li><li><a href="#known-issues" class="table-of-contents__link toc-highlight">Known Issues</a></li><li><a href="#customizing-airbyte-manifests" class="table-of-contents__link toc-highlight">Customizing Airbyte Manifests</a><ul><li><a href="#view-raw-manifests" class="table-of-contents__link toc-highlight">View Raw Manifests</a></li><li><a href="#helm-charts" class="table-of-contents__link toc-highlight">Helm Charts</a></li></ul></li><li><a href="#operator-guide" class="table-of-contents__link toc-highlight">Operator Guide</a><ul><li><a href="#view-api-server-logs" class="table-of-contents__link toc-highlight">View API Server Logs</a></li><li><a href="#view-scheduler-or-job-logs" class="table-of-contents__link toc-highlight">View Scheduler or Job Logs</a></li><li><a href="#connector-container-logs" class="table-of-contents__link toc-highlight">Connector Container Logs</a></li><li><a href="#upgrading-airbyte-kube" class="table-of-contents__link toc-highlight">Upgrading Airbyte Kube</a></li><li><a href="#resizing-volumes" class="table-of-contents__link toc-highlight">Resizing Volumes</a></li><li><a href="#copy-files-tofrom-volumes" class="table-of-contents__link toc-highlight">Copy Files To/From Volumes</a></li><li><a href="#listing-files" class="table-of-contents__link toc-highlight">Listing Files</a></li><li><a href="#reading-files" class="table-of-contents__link toc-highlight">Reading Files</a></li><li><a href="#persistent-storage-on-gke-regional-cluster" class="table-of-contents__link toc-highlight">Persistent storage on GKE regional cluster</a></li></ul></li><li><a href="#troubleshooting" class="table-of-contents__link toc-highlight">Troubleshooting</a></li><li><a href="#developing-airbyte-on-kubernetes" class="table-of-contents__link toc-highlight">Developing Airbyte on Kubernetes</a></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.a2b21224.js"></script>
<script src="/assets/js/main.4b437c0c.js"></script>
</body>
</html>