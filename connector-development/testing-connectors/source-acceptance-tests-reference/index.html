<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-connector-development/testing-connectors/source-acceptance-tests-reference">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<title data-rh="true">Source Acceptance Tests Reference | Airbyte Documentation</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://airbytehq.github.io/connector-development/testing-connectors/source-acceptance-tests-reference"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Source Acceptance Tests Reference | Airbyte Documentation"><meta data-rh="true" name="description" content="To ensure a minimum quality bar, Airbyte runs all connectors against the same set of integration tests \(sources &amp; destinations have two different test suites\). Those tests ensure that each connector adheres to the Airbyte Specification and responds correctly to Airbyte commands when provided valid \(or invalid\) inputs."><meta data-rh="true" property="og:description" content="To ensure a minimum quality bar, Airbyte runs all connectors against the same set of integration tests \(sources &amp; destinations have two different test suites\). Those tests ensure that each connector adheres to the Airbyte Specification and responds correctly to Airbyte commands when provided valid \(or invalid\) inputs."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://airbytehq.github.io/connector-development/testing-connectors/source-acceptance-tests-reference"><link data-rh="true" rel="alternate" href="https://airbytehq.github.io/connector-development/testing-connectors/source-acceptance-tests-reference" hreflang="en"><link data-rh="true" rel="alternate" href="https://airbytehq.github.io/connector-development/testing-connectors/source-acceptance-tests-reference" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d30a4f2e.css">
<link rel="preload" href="/assets/js/runtime~main.c509c285.js" as="script">
<link rel="preload" href="/assets/js/main.4b437c0c.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-dark.png" alt="Simple, secure and extensible data integration" class="themedImage_W2Cr themedImage--light_TfLj" height="40" width="140"><img src="/img/logo-light.png" alt="Simple, secure and extensible data integration" class="themedImage_W2Cr themedImage--dark_oUvU" height="40" width="140"></div><b class="navbar__title"></b></a><a href="https://airbyte.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://status.airbyte.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Status<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://airbyte.io/recipes" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Recipes<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://discuss.airbyte.io/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Discourse<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD"><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/cloud/getting-started-with-airbyte-cloud">Airbyte Cloud QuickStart</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/quickstart/deploy-airbyte">Airbyte Open Source QuickStart</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/deploying-airbyte/local-deployment">Deploying Airbyte Open Source</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/operator-guides/upgrading-airbyte">Operator Guides</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/integrations/">Connector Catalog</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/connector-development/">Connector Development</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/">Connector Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/tutorials/cdk-speedrun">Python CDK Speedrun: Creating a Source</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/connector-development/tutorials/cdk-tutorial-python-http/">Python CDK: Creating a HTTP API Source</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/tutorials/building-a-python-source">Building a Python Source</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/tutorials/building-a-python-destination">Building a Python Destination</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/tutorials/building-a-java-destination">Building a Java Destination</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/tutorials/profile-java-connector-memory">Profile Java Connector Memory Usage</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/connector-development/cdk-python/">Connector Development Kit (Python)</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/cdk-faros-js">Connector Development Kit \(Javascript\)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/airbyte101">Airbyte 101 for Connector Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/testing-connectors/">Testing Connectors</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/connector-development/testing-connectors/source-acceptance-tests-reference">Source Acceptance Tests Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/connector-specification-reference">Connector Specification Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/best-practices">Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/connector-development/ux-handbook">UX Handbook</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/contributing-to-airbyte/">Contributing to Airbyte</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/understanding-airbyte/">Understanding Airbyte</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/api-documentation">API documentation</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/project-overview/">Project Overview</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/troubleshooting/">Troubleshooting &amp; FAQ</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a href="https://github.com/airbytehq/airbyte" target="_blank" rel="noopener noreferrer" class="menu__link menuExternalLink_tcZa">Airbyte Repository<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></nav></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Connector Development</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Source Acceptance Tests Reference</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Source Acceptance Tests Reference</h1><p>To ensure a minimum quality bar, Airbyte runs all connectors against the same set of integration tests <!-- -->(<!-- -->sources &amp; destinations have two different test suites<!-- -->)<!-- -->. Those tests ensure that each connector adheres to the <a href="/understanding-airbyte/airbyte-specification">Airbyte Specification</a> and responds correctly to Airbyte commands when provided valid <!-- -->(<!-- -->or invalid<!-- -->)<!-- --> inputs.</p><p><em>Note: If you are looking for reference documentation for the deprecated first version of test suites, see</em> <a href="https://github.com/airbytehq/airbyte/tree/e378d40236b6a34e1c1cb481c8952735ec687d88/docs/contributing-to-airbyte/building-new-connector/legacy-standard-source-tests.md" target="_blank" rel="noopener noreferrer"><em>Standard Tests <!-- -->(<!-- -->Legacy<!-- -->)</em></a><em>.</em></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="architecture-of-standard-tests">Architecture of standard tests<a class="hash-link" href="#architecture-of-standard-tests" title="Direct link to heading">‚Äã</a></h2><p>The Standard Test Suite runs its tests against the connector&#x27;s Docker image. It takes as input the configuration file <code>acceptance-tests-config.yml</code>.</p><p><img loading="lazy" alt="Standard test sequence diagram" src="/assets/images/standard_tests_sequence_diagram-e16dc2dfe682e24b9d530650345ce7e2.png" width="1178" height="874" class="img_E7b_"></p><p>The Standard Test Suite use pytest as a test runner and was built as pytest plugin <code>source-acceptance-test</code>. This plugin adds a new configuration option <code>‚Äîacceptance-test-config</code> - it should points to the folder with <code>acceptance-tests-config.yml</code>.</p><p>Each test suite has a timeout and will fail if the limit is exceeded.</p><p>See all the test cases, their description, and inputs in <a href="https://github.com/airbytehq/airbyte/tree/e378d40236b6a34e1c1cb481c8952735ec687d88/docs/contributing-to-airbyte/building-new-connector/source-acceptance-tests.md" target="_blank" rel="noopener noreferrer">Source Acceptance Tests</a>.</p><h2 class="anchor anchorWithStickyNavbar_mojV" id="setting-up-standard-tests-for-your-connector">Setting up standard tests for your connector<a class="hash-link" href="#setting-up-standard-tests-for-your-connector" title="Direct link to heading">‚Äã</a></h2><p>Create <code>acceptance-test-config.yml</code>. In most cases, your connector already has this file in its root folder. Here is an example of the minimal <code>acceptance-test-config.yml</code>:</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">connector_image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> airbyte/source</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">some</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">connector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">tests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">spec_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;some_folder/spec.json&quot;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Build your connector image if needed.</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">docker build .</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Run one of the two scripts in the root of the connector:</p><ul><li><code>python -m pytest -p integration_tests.acceptance</code> - to run tests inside virtual environment<ul><li>On test completion, a log will be outputted to the terminal verifying:<ul><li>The connector the tests were ran for </li><li>The git hash of the code used </li><li>Whether the tests passed or failed </li></ul>This is useful to provide in your PR as evidence of the acceptance tests passing locally.</li></ul></li><li><code>./acceptance-test-docker.sh</code> - to run tests from a docker container</li></ul><p>If the test fails you will see detail about the test and where to find its inputs and outputs to reproduce it. You can also debug failed tests by adding <code>‚Äîpdb ‚Äîlast-failed</code>:</p><div class="codeBlockContainer_I0IT language-text theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">python -m pytest -p integration_tests.acceptance --pdb --last-failed</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>See other useful pytest options <a href="https://docs.pytest.org/en/stable/usage.html" target="_blank" rel="noopener noreferrer">here</a></p><h2 class="anchor anchorWithStickyNavbar_mojV" id="dynamically-managing-inputs--resources-used-in-standard-tests">Dynamically managing inputs &amp; resources used in standard tests<a class="hash-link" href="#dynamically-managing-inputs--resources-used-in-standard-tests" title="Direct link to heading">‚Äã</a></h2><p>Since the inputs to standard tests are often static, the file-based runner is sufficient for most connectors. However, in some cases, you may need to run pre or post hooks to dynamically create or destroy resources for use in standard tests. For example, if we need to spin up a Redshift cluster to use in the test then tear it down afterwards, we need the ability to run code before and after the tests, as well as customize the Redshift cluster URL we pass to the standard tests. If you have need for this use case, please reach out to us via <a href="https://github.com/airbytehq/airbyte" target="_blank" rel="noopener noreferrer">Github</a> or <a href="https://slack.airbyte.io" target="_blank" rel="noopener noreferrer">Slack</a>. We currently support it for Java &amp; Python, and other languages can be made available upon request.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="python">Python<a class="hash-link" href="#python" title="Direct link to heading">‚Äã</a></h3><p>Create pytest yield-fixture with your custom setup/teardown code and place it in <code>integration_tests/acceptance.py</code>, Example of fixture that starts a docker container before tests and stops before exit:</p><div class="codeBlockContainer_I0IT language-python theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-python codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token decorator annotation punctuation" style="color:#393A34">@pytest</span><span class="token decorator annotation punctuation" style="color:#393A34">.</span><span class="token decorator annotation punctuation" style="color:#393A34">fixture</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">scope</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;session&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> autouse</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">connector_setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token triple-quoted-string string" style="color:#e3116c">&quot;&quot;&quot; This fixture is a placeholder for external resources that acceptance test might require.</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    &quot;&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> docker</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">from_env</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">containers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;your/docker-image&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> detach</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">True</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">yield</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    container</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>These tests are configurable via <code>acceptance-test-config.yml</code>. Each test has a number of inputs, you can provide multiple sets of inputs which will cause the same to run multiple times - one for each set of inputs.</p><p>Example of <code>acceptance-test-config.yml</code>:</p><div class="codeBlockContainer_I0IT language-yaml theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-yaml codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">connector_image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string  </span><span class="token comment" style="color:#999988;font-style:italic"># Docker image to test, for example &#x27;airbyte/source-hubspot:0.1.0&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">base_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string  </span><span class="token comment" style="color:#999988;font-style:italic"># Base path for all relative paths, optional, default - ./</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">tests</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Tests configuration </span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># list of the test inputs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">connection</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># list of the test inputs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">config_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string  </span><span class="token comment" style="color:#999988;font-style:italic"># set #1 of inputs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">config_path</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string  </span><span class="token comment" style="color:#999988;font-style:italic"># set #2 of inputs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">status</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># discovery:  # skip this test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">incremental</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># skip this test as well</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="test-spec">Test Spec<a class="hash-link" href="#test-spec" title="Direct link to heading">‚Äã</a></h2><p>Verify that a spec operation issued to the connector returns a valid spec.</p><table><thead><tr><th align="left">Input</th><th align="left">Type</th><th align="left">Default</th><th align="left">Note</th></tr></thead><tbody><tr><td align="left"><code>spec_path</code></td><td align="left">string</td><td align="left"><code>secrets/spec.json</code></td><td align="left">Path to a JSON object representing the spec expected to be output by this connector</td></tr><tr><td align="left"><code>timeout_seconds</code></td><td align="left">int</td><td align="left">10</td><td align="left">Test execution timeout in seconds</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="test-connection">Test Connection<a class="hash-link" href="#test-connection" title="Direct link to heading">‚Äã</a></h2><p>Verify that a check operation issued to the connector with the input config file returns a successful response.</p><table><thead><tr><th align="left">Input</th><th align="left">Type</th><th align="left">Default</th><th align="left">Note</th></tr></thead><tbody><tr><td align="left"><code>config_path</code></td><td align="left">string</td><td align="left"><code>secrets/config.json</code></td><td align="left">Path to a JSON object representing a valid connector configuration</td></tr><tr><td align="left"><code>status</code></td><td align="left"><code>succeed</code> <code>failed</code> <code>exception</code></td><td align="left"></td><td align="left">Indicate if connection check should succeed with provided config</td></tr><tr><td align="left"><code>timeout_seconds</code></td><td align="left">int</td><td align="left">30</td><td align="left">Test execution timeout in seconds</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="test-discovery">Test Discovery<a class="hash-link" href="#test-discovery" title="Direct link to heading">‚Äã</a></h2><p>Verifies when a discover operation is run on the connector using the given config file, a valid catalog is produced by the connector.</p><table><thead><tr><th align="left">Input</th><th align="left">Type</th><th align="left">Default</th><th align="left">Note</th></tr></thead><tbody><tr><td align="left"><code>config_path</code></td><td align="left">string</td><td align="left"><code>secrets/config.json</code></td><td align="left">Path to a JSON object representing a valid connector configuration</td></tr><tr><td align="left"><code>configured_catalog_path</code></td><td align="left">string</td><td align="left"><code>integration_tests/configured_catalog.json</code></td><td align="left">Path to configured catalog</td></tr><tr><td align="left"><code>timeout_seconds</code></td><td align="left">int</td><td align="left">30</td><td align="left">Test execution timeout in seconds</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="test-basic-read">Test Basic Read<a class="hash-link" href="#test-basic-read" title="Direct link to heading">‚Äã</a></h2><p>Configuring all streams in the input catalog to full refresh mode verifies that a read operation produces some RECORD messages. Each stream should have some data, if you can&#x27;t guarantee this for particular streams - add them to the <code>empty_streams</code> list.
Set <code>validate_data_points=True</code> if possible. This validation is going to be enabled by default and won&#x27;t be configurable in future releases.</p><table><thead><tr><th align="left">Input</th><th align="left">Type</th><th align="left">Default</th><th align="left">Note</th></tr></thead><tbody><tr><td align="left"><code>config_path</code></td><td align="left">string</td><td align="left"><code>secrets/config.json</code></td><td align="left">Path to a JSON object representing a valid connector configuration</td></tr><tr><td align="left"><code>configured_catalog_path</code></td><td align="left">string</td><td align="left"><code>integration_tests/configured_catalog.json</code></td><td align="left">Path to configured catalog</td></tr><tr><td align="left"><code>empty_streams</code></td><td align="left">array</td><td align="left">[<!-- -->]</td><td align="left">List of streams that might be empty</td></tr><tr><td align="left"><code>validate_schema</code></td><td align="left">boolean</td><td align="left">True</td><td align="left">Verify that structure and types of records matches the schema from discovery command</td></tr><tr><td align="left"><code>validate_data_points</code></td><td align="left">boolean</td><td align="left">False</td><td align="left">Validate that all fields in all streams contained at least one data point</td></tr><tr><td align="left"><code>timeout_seconds</code></td><td align="left">int</td><td align="left">5<!-- -->*<!-- -->60</td><td align="left">Test execution timeout in seconds</td></tr><tr><td align="left"><code>expect_records</code></td><td align="left">object</td><td align="left">None</td><td align="left">Compare produced records with expected records, see details below</td></tr><tr><td align="left"><code>expect_records.path</code></td><td align="left">string</td><td align="left"></td><td align="left">File with expected records</td></tr><tr><td align="left"><code>expect_records.extra_fields</code></td><td align="left">boolean</td><td align="left">False</td><td align="left">Allow output records to have other fields i.e: expected records are a subset</td></tr><tr><td align="left"><code>expect_records.exact_order</code></td><td align="left">boolean</td><td align="left">False</td><td align="left">Ensure  that records produced in exact same order</td></tr><tr><td align="left"><code>expect_records.extra_records</code></td><td align="left">boolean</td><td align="left">True</td><td align="left">Allow connector to produce extra records, but still enforce all records from the expected file to be produced</td></tr></tbody></table><p><code>expect_records</code> is a nested configuration, if omitted - the part of the test responsible for record matching will be skipped. Due to the fact that we can&#x27;t identify records without primary keys, only the following flag combinations are supported:</p><table><thead><tr><th align="left">extra<!-- -->_<!-- -->fields</th><th align="left">exact<!-- -->_<!-- -->order</th><th align="left">extra<!-- -->_<!-- -->records</th></tr></thead><tbody><tr><td align="left">x</td><td align="left">x</td><td align="left"></td></tr><tr><td align="left"></td><td align="left">x</td><td align="left">x</td></tr><tr><td align="left"></td><td align="left">x</td><td align="left"></td></tr><tr><td align="left"></td><td align="left"></td><td align="left">x</td></tr><tr><td align="left"></td><td align="left"></td><td align="left"></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="schema-format-checking">Schema format checking<a class="hash-link" href="#schema-format-checking" title="Direct link to heading">‚Äã</a></h3><p>If some field has <a href="https://json-schema.org/understanding-json-schema/reference/string.html#format" target="_blank" rel="noopener noreferrer">format</a> attribute specified on its catalog json schema, Source Acceptance Testing framework performs checking against format. It support checking of all <a href="https://json-schema.org/understanding-json-schema/reference/string.html#built-in-formats" target="_blank" rel="noopener noreferrer">builtin</a> jsonschema formats for draft 7 specification: email, hostnames, ip addresses, time, date and date-time formats.</p><p>Note: For date-time we are not checking against compliance against ISO8601 <!-- -->(<!-- -->and RFC3339 as subset of it<!-- -->)<!-- -->. Since we are using specified format to set database column type on db normalization stage, value should be compliant to bigquery <a href="https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types#timestamp_type" target="_blank" rel="noopener noreferrer">timestamp</a> and SQL &quot;timestamp with timezone&quot; formats.</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="example-of-expected_recordstxt">Example of <code>expected_records.txt</code>:<a class="hash-link" href="#example-of-expected_recordstxt" title="Direct link to heading">‚Äã</a></h3><p>In general, the expected<!-- -->_<!-- -->records.json should contain the subset of output of the records of particular stream you need to test. The required fields are: <code>stream, data, emitted_at</code></p><div class="codeBlockContainer_I0IT language-javascript theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-javascript codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;stream&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_stream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;field_1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_3&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_4&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;is_true&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_5&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">123</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;emitted_at&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1626172757000</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;stream&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_stream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;field_1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value1&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_3&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_4&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;is_true&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_5&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">456</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;emitted_at&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1626172757000</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;stream&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_stream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;field_1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value2&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_3&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_4&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;is_true&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_5&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">678</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;emitted_at&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1626172757000</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;stream&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;my_stream&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;field_1&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_2&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;value3&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_3&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_4&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token string-property property" style="color:#36acaa">&quot;is_true&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;field_5&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">91011</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string-property property" style="color:#36acaa">&quot;emitted_at&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1626172757000</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_mojV" id="test-full-refresh-sync">Test Full Refresh sync<a class="hash-link" href="#test-full-refresh-sync" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="testsequentialreads">TestSequentialReads<a class="hash-link" href="#testsequentialreads" title="Direct link to heading">‚Äã</a></h3><p>This test performs two read operations on all streams which support full refresh syncs. It then verifies that the RECORD messages output from both were identical or the former is a strict subset of the latter.</p><table><thead><tr><th align="left">Input</th><th align="left">Type</th><th align="left">Default</th><th align="left">Note</th></tr></thead><tbody><tr><td align="left"><code>config_path</code></td><td align="left">string</td><td align="left"><code>secrets/config.json</code></td><td align="left">Path to a JSON object representing a valid connector configuration</td></tr><tr><td align="left"><code>configured_catalog_path</code></td><td align="left">string</td><td align="left"><code>integration_tests/configured_catalog.json</code></td><td align="left">Path to configured catalog</td></tr><tr><td align="left"><code>timeout_seconds</code></td><td align="left">int</td><td align="left">20<!-- -->*<!-- -->60</td><td align="left">Test execution timeout in seconds</td></tr><tr><td align="left"><code>ignored_fields</code></td><td align="left">dict</td><td align="left">None</td><td align="left">For each stream, list of fields path ignoring in sequential reads test</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_mojV" id="test-incremental-sync">Test Incremental sync<a class="hash-link" href="#test-incremental-sync" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithStickyNavbar_mojV" id="testtwosequentialreads">TestTwoSequentialReads<a class="hash-link" href="#testtwosequentialreads" title="Direct link to heading">‚Äã</a></h3><p>This test verifies that all streams in the input catalog which support incremental sync can do so correctly. It does this by running two read operations: the first takes the configured catalog and config provided to this test as input. It then verifies that the sync produced a non-zero number of <code>RECORD</code> and <code>STATE</code> messages. The second read takes the same catalog and config used in the first test, plus the last <code>STATE</code> message output by the first read operation as the input state file. It verifies that either no records are produced <!-- -->(<!-- -->since we read all records in the first sync<!-- -->)<!-- --> or all records that produced have cursor value greater or equal to cursor value from <code>STATE</code> message. This test is performed only for streams that support incremental. Streams that do not support incremental sync are ignored. If no streams in the input catalog support incremental sync, this test is skipped.</p><table><thead><tr><th align="left">Input</th><th align="left">Type</th><th align="left">Default</th><th align="left">Note</th></tr></thead><tbody><tr><td align="left"><code>config_path</code></td><td align="left">string</td><td align="left"><code>secrets/config.json</code></td><td align="left">Path to a JSON object representing a valid connector configuration</td></tr><tr><td align="left"><code>configured_catalog_path</code></td><td align="left">string</td><td align="left"><code>integration_tests/configured_catalog.json</code></td><td align="left">Path to configured catalog</td></tr><tr><td align="left"><code>cursor_paths</code></td><td align="left">dict</td><td align="left">{}</td><td align="left">For each stream, the path of its cursor field in the output state messages. If omitted the path will be taken from the last piece of path from stream cursor<!-- -->_<!-- -->field.</td></tr><tr><td align="left"><code>timeout_seconds</code></td><td align="left">int</td><td align="left">20<!-- -->*<!-- -->60</td><td align="left">Test execution timeout in seconds</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_mojV" id="teststatewithabnormallylargevalues">TestStateWithAbnormallyLargeValues<a class="hash-link" href="#teststatewithabnormallylargevalues" title="Direct link to heading">‚Äã</a></h3><p>This test verifies that sync produces no records when run with the STATE with abnormally large values</p><table><thead><tr><th align="left">Input</th><th align="left">Type</th><th align="left">Default</th><th align="left">Note</th></tr></thead><tbody><tr><td align="left"><code>config_path</code></td><td align="left">string</td><td align="left"><code>secrets/config.json</code></td><td align="left">Path to a JSON object representing a valid connector configuration</td></tr><tr><td align="left"><code>configured_catalog_path</code></td><td align="left">string</td><td align="left"><code>integration_tests/configured_catalog.json</code></td><td align="left">Path to configured catalog</td></tr><tr><td align="left"><code>future_state_path</code></td><td align="left">string</td><td align="left">None</td><td align="left">Path to the state file with abnormally large cursor values</td></tr><tr><td align="left"><code>timeout_seconds</code></td><td align="left">int</td><td align="left">20<!-- -->*<!-- -->60</td><td align="left">Test execution timeout in seconds</td></tr></tbody></table></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/airbytehq/airbyte/docs/../docs/connector-development/testing-connectors/source-acceptance-tests-reference.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/connector-development/testing-connectors/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Testing Connectors</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/connector-development/connector-specification-reference"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Connector Specification Reference</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#architecture-of-standard-tests" class="table-of-contents__link toc-highlight">Architecture of standard tests</a></li><li><a href="#setting-up-standard-tests-for-your-connector" class="table-of-contents__link toc-highlight">Setting up standard tests for your connector</a></li><li><a href="#dynamically-managing-inputs--resources-used-in-standard-tests" class="table-of-contents__link toc-highlight">Dynamically managing inputs &amp; resources used in standard tests</a><ul><li><a href="#python" class="table-of-contents__link toc-highlight">Python</a></li></ul></li><li><a href="#test-spec" class="table-of-contents__link toc-highlight">Test Spec</a></li><li><a href="#test-connection" class="table-of-contents__link toc-highlight">Test Connection</a></li><li><a href="#test-discovery" class="table-of-contents__link toc-highlight">Test Discovery</a></li><li><a href="#test-basic-read" class="table-of-contents__link toc-highlight">Test Basic Read</a><ul><li><a href="#schema-format-checking" class="table-of-contents__link toc-highlight">Schema format checking</a></li><li><a href="#example-of-expected_recordstxt" class="table-of-contents__link toc-highlight">Example of <code>expected_records.txt</code>:</a></li></ul></li><li><a href="#test-full-refresh-sync" class="table-of-contents__link toc-highlight">Test Full Refresh sync</a><ul><li><a href="#testsequentialreads" class="table-of-contents__link toc-highlight">TestSequentialReads</a></li></ul></li><li><a href="#test-incremental-sync" class="table-of-contents__link toc-highlight">Test Incremental sync</a><ul><li><a href="#testtwosequentialreads" class="table-of-contents__link toc-highlight">TestTwoSequentialReads</a></li><li><a href="#teststatewithabnormallylargevalues" class="table-of-contents__link toc-highlight">TestStateWithAbnormallyLargeValues</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/assets/js/runtime~main.c509c285.js"></script>
<script src="/assets/js/main.4b437c0c.js"></script>
</body>
</html>