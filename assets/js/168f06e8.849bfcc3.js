"use strict";(self.webpackChunkdocu=self.webpackChunkdocu||[]).push([[260],{3905:function(e,t,a){a.d(t,{Zo:function(){return d},kt:function(){return c}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},d=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),m=s(a),c=r,f=m["".concat(p,".").concat(c)]||m[c]||u[c]||l;return a?n.createElement(f,i(i({ref:t},d),{},{components:a})):n.createElement(f,i({ref:t},d))}));function c(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,i=new Array(l);i[0]=m;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o.mdxType="string"==typeof e?e:r,i[1]=o;for(var s=2;s<l;s++)i[s]=a[s];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},51705:function(e,t,a){a.r(t),a.d(t,{assets:function(){return d},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return u}});var n=a(87462),r=a(63366),l=(a(67294),a(3905)),i=["components"],o={},p="Mongo DB",s={unversionedId:"integrations/sources/mongodb-v2",id:"integrations/sources/mongodb-v2",title:"Mongo DB",description:"The MongoDB source allows to sync data from MongoDb. Source supports Full Refresh and Incremental sync strategies.",source:"@site/../docs/integrations/sources/mongodb-v2.md",sourceDirName:"integrations/sources",slug:"/integrations/sources/mongodb-v2",permalink:"/integrations/sources/mongodb-v2",editUrl:"https://github.com/airbytehq/airbyte/blob/gitbook/v1/README.md/../docs/integrations/sources/mongodb-v2.md",tags:[],version:"current",frontMatter:{},sidebar:"mySidebar",previous:{title:"Monday",permalink:"/integrations/sources/monday"},next:{title:"My Hours",permalink:"/integrations/sources/my-hours"}},d={},u=[{value:"Resulting schema",id:"resulting-schema",level:2},{value:"Step 1. Find all unique properties",id:"step-1-find-all-unique-properties",level:3},{value:"Step 2. Determine property types",id:"step-2-determine-property-types",level:3},{value:"Features",id:"features",level:2},{value:"Full Refresh sync",id:"full-refresh-sync",level:3},{value:"Incremental sync",id:"incremental-sync",level:3},{value:"Getting started",id:"getting-started",level:2},{value:"Create users",id:"create-users",level:3},{value:"Enable MongoDB authentication",id:"enable-mongodb-authentication",level:3},{value:"Configure firewall",id:"configure-firewall",level:3},{value:"TLS/SSL on a Connection",id:"tlsssl-on-a-connection",level:3},{value:"\u0421onfiguration Parameters",id:"\u0441onfiguration-parameters",level:3},{value:"Changelog",id:"changelog",level:2}],m={toc:u};function c(e){var t=e.components,a=(0,r.Z)(e,i);return(0,l.kt)("wrapper",(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"mongo-db"},"Mongo DB"),(0,l.kt)("p",null,"The MongoDB source allows to sync data from MongoDb. Source supports Full Refresh and Incremental sync strategies."),(0,l.kt)("h2",{id:"resulting-schema"},"Resulting schema"),(0,l.kt)("p",null,"MongoDB does not have anything like table definition, thus we have to define column types from actual attributes and their values. Discover phase have two steps:"),(0,l.kt)("h3",{id:"step-1-find-all-unique-properties"},"Step 1. Find all unique properties"),(0,l.kt)("p",null,"Connector select 10k documents to collect all distinct field."),(0,l.kt)("h3",{id:"step-2-determine-property-types"},"Step 2. Determine property types"),(0,l.kt)("p",null,"For each property found, connector determines its type, if all the selected values have the same type - connector will set appropriate type to the property. In all other cases connector will fallback to ",(0,l.kt)("inlineCode",{parentName:"p"},"string")," type."),(0,l.kt)("h2",{id:"features"},"Features"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Feature"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Supported"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Full Refresh Sync"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Incremental - Append Sync"),(0,l.kt)("td",{parentName:"tr",align:"left"},"Yes")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Replicate Incremental Deletes"),(0,l.kt)("td",{parentName:"tr",align:"left"},"No")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"Namespaces"),(0,l.kt)("td",{parentName:"tr",align:"left"},"No")))),(0,l.kt)("h3",{id:"full-refresh-sync"},"Full Refresh sync"),(0,l.kt)("p",null,"Works as usual full refresh sync."),(0,l.kt)("h3",{id:"incremental-sync"},"Incremental sync"),(0,l.kt)("p",null,"Cursor field can not be nested. Currently only top level document properties are supported."),(0,l.kt)("p",null,"Cursor should ",(0,l.kt)("strong",{parentName:"p"},"never")," be blank. In case cursor is blank - the incremental sync results might be unpredictable and will totally rely on MongoDB comparison algorithm."),(0,l.kt)("p",null,"Only ",(0,l.kt)("inlineCode",{parentName:"p"},"datetime")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"number")," cursor types are supported. Cursor type is determined based on the cursor field name:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"datetime")," - if cursor field name contains a string from: ",(0,l.kt)("inlineCode",{parentName:"li"},"time"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"date"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"_at"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"timestamp"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"ts")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"number")," - otherwise")),(0,l.kt)("h2",{id:"getting-started"},"Getting started"),(0,l.kt)("p",null,"This guide describes in details how you can configure MongoDB for integration with Airbyte."),(0,l.kt)("h3",{id:"create-users"},"Create users"),(0,l.kt)("p",null,"Run ",(0,l.kt)("inlineCode",{parentName:"p"},"mongo")," shell, switch to ",(0,l.kt)("inlineCode",{parentName:"p"},"admin")," database and create a ",(0,l.kt)("inlineCode",{parentName:"p"},"READ_ONLY_USER"),". ",(0,l.kt)("inlineCode",{parentName:"p"},"READ_ONLY_USER")," will be used for Airbyte integration. Please make sure that user has read-only privileges."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'mongo\nuse admin;\ndb.createUser({user: "READ_ONLY_USER", pwd: "READ_ONLY_PASSWORD", roles: [{role: "read", db: "TARGET_DATABASE"}]})\n')),(0,l.kt)("p",null,"Make sure the user have appropriate access levels."),(0,l.kt)("h3",{id:"enable-mongodb-authentication"},"Enable MongoDB authentication"),(0,l.kt)("p",null,"Open ",(0,l.kt)("inlineCode",{parentName:"p"},"/etc/mongod.conf")," and add/replace specific keys:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-yaml"},"net:\n  bindIp: 0.0.0.0\n\nsecurity:\n  authorization: enabled\n")),(0,l.kt)("p",null,"Binding to ",(0,l.kt)("inlineCode",{parentName:"p"},"0.0.0.0")," will allow to connect to database from any IP address."),(0,l.kt)("p",null,"The last line will enable MongoDB security. Now only authenticated users will be able to access the database."),(0,l.kt)("h3",{id:"configure-firewall"},"Configure firewall"),(0,l.kt)("p",null,"Make sure that MongoDB is accessible from external servers. Specific commands will depend on the firewall you are using ","(","UFW/iptables/AWS/etc",")",". Please refer to appropriate documentation."),(0,l.kt)("p",null,"Your ",(0,l.kt)("inlineCode",{parentName:"p"},"READ_ONLY_USER")," should now be ready for use with Airbyte."),(0,l.kt)("h3",{id:"tlsssl-on-a-connection"},"TLS/SSL on a Connection"),(0,l.kt)("p",null,"It is recommended to use encrypted connection. Connection with TLS/SSL security protocol for MongoDb Atlas Cluster and Replica Set instances is enabled by default. To enable TSL/SSL connection with Standalone MongoDb instance, please refer to ",(0,l.kt)("a",{parentName:"p",href:"https://docs.mongodb.com/manual/tutorial/configure-ssl/"},"MongoDb Documentation"),"."),(0,l.kt)("h3",{id:"\u0441onfiguration-parameters"},"\u0421onfiguration Parameters"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Database: database name"),(0,l.kt)("li",{parentName:"ul"},"Authentication Source: specifies the database that the supplied credentials should be validated against. Defaults to ",(0,l.kt)("inlineCode",{parentName:"li"},"admin"),"."),(0,l.kt)("li",{parentName:"ul"},"User: username to use when connecting"),(0,l.kt)("li",{parentName:"ul"},"Password: used to authenticate the user"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Standalone MongoDb instance"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Host: URL of the database"),(0,l.kt)("li",{parentName:"ul"},"Port: Port to use for connecting to the database"),(0,l.kt)("li",{parentName:"ul"},"TLS: indicates whether to create encrypted connection"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"Replica Set"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Server addresses: the members of a replica set"),(0,l.kt)("li",{parentName:"ul"},"Replica Set: A replica set name"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"MongoDb Atlas Cluster"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"Cluster URL: URL of a cluster to connect to")))),(0,l.kt)("p",null,"For more information regarding configuration parameters, please see ",(0,l.kt)("a",{parentName:"p",href:"https://docs.mongodb.com/drivers/java/sync/v4.3/fundamentals/connection/"},"MongoDb Documentation"),"."),(0,l.kt)("h2",{id:"changelog"},"Changelog"),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:"left"},"Version"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Date"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Pull Request"),(0,l.kt)("th",{parentName:"tr",align:"left"},"Subject"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.13"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2022-02-21"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/10276"},"10276")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Create a custom codec registry to handle DBRef MongoDB objects")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.12"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2022-02-14"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/10256"},"10256")),(0,l.kt)("td",{parentName:"tr",align:"left"},"(unpublished) Add ",(0,l.kt)("inlineCode",{parentName:"td"},"-XX:+ExitOnOutOfMemoryError")," JVM option")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.11"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2022-01-10"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/9238"},"9238")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Return only those collections for which the user has privileges")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.10"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-12-30"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/9202"},"9202")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Update connector fields title/description")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.9"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-12-07"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/8491"},"8491")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Configure 10000 limit doc reading during Discovery step")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.8"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-11-29"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/8306"},"8306")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Added milliseconds for date format for cursor")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.7"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-11-22"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/8161"},"8161")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Updated Performance and updated cursor for timestamp type")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.5"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-11-17"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/8046"},"8046")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Added milliseconds to convert timestamp to datetime format")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.4"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-11-15"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/7982"},"7982")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Updated Performance")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.3"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-10-19"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/7160"},"7160")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Fixed nested document parsing")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.2"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-10-07"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/6860"},"6860")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Added filter to avoid MongoDb system collections")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.1"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-09-21"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/6364"},"6364")),(0,l.kt)("td",{parentName:"tr",align:"left"},"Source MongoDb: added support via TLS/SSL")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:"left"},"0.1.0"),(0,l.kt)("td",{parentName:"tr",align:"left"},"2021-08-30"),(0,l.kt)("td",{parentName:"tr",align:"left"},(0,l.kt)("a",{parentName:"td",href:"https://github.com/airbytehq/airbyte/pull/5530"},"5530")),(0,l.kt)("td",{parentName:"tr",align:"left"},"New source: MongoDb ported to java")))))}c.isMDXComponent=!0}}]);